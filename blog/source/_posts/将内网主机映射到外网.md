---
title: 将内网主机映射到外网
date: 2018-01-19 20:48:03
tags:
---

### 摘要：
大部分服务都是放在内网主机上，然后通过一个外网的路由进行访问控制，内网的主机是无法通过外网直接访问的，那么如何将家里内网的主机映射出来，使得在外面也可以访问到家里的电脑呢？如何在外网可以自由访问搭在内网的服务？

<!---more--->

#### 准备工作
1、一具有外网ip的电脑，即外网可以直接访问的主机，可以去各大云平台去租用一台云主机

2、frp映射服务软件

3、内网需要映射出来的主机

---

#### 详细过程

原理：frp内网映射和Teamvew的工作原理是一样的，只是映射服务器得我们自己搭，在具有外网网卡的服务器上搭建frp的服务端，在需要被映射出来的主机上安装frp客户端，客户端会主动去连接服务器端，所以当我们去访问外网ip地址时，内网主机上的客户端会关注服务端的访问请求，当有服务请求时，内网客户端会主动去请求服务端的访问请求，因为是内网客户端的主动请求，所以可绕过内网限制。

###### 架构图如下:
![](/assets/img/new.png)

##### 访问流程图：
![](/assets/img/neiwaiys.png)



1、申请一台可供外网访问的主机，可以去阿里云，腾讯云，亚马逊云等云服务供应商那去租一台主机，最小配置的即可，如果有信用卡可以免费租用亚马逊服务器一年

2、下载frp软件包

 [frp下载地址](https://github.com/fatedier/frp/releases)根据不同系统下载相应的软件包

3、下载好的软件包上传到具有外网ip的服务器上，解压缩到一个目录中，其中frps是服务端软件，frps.ini是服务端的配置文件

````
````
|
