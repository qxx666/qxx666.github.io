---
title: 搭建双主模式高可用数据库
date: 2018-01-23 15:27:45
tags:
---
##### 摘要:
所有数据存在一个数据库对于一个公司来说是比较危险的，当改数据库挂机了，或者磁盘损坏等一系列问题发生时，数据无法正常提供，公司的业务必然也会受到影响。所以数据备份都是必要的，这篇文章将介绍，如何实现双主模式的数据备份，以及服务的高可用，即当一个主机上的数据库挂掉后访问服务立刻转移到另一个备份的数据库上。

<!---more--->

mysql双主架构的思路是：

1、两台mysql都可读写，互为主备，默认只使用一台（masterA）负责数据的写入，另一台（masterB）备用；

2.masterA是masterB的主库，masterB又是masterA的主库，它们互为主从；

3.两台主库之间做高可用,可以采用keepalived等方案（使用VIP对外提供服务）；

4.所有提供服务的从服务器与masterB进行主从同步（双主多从）;

5.建议采用高可用策略的时候，masterA或masterB均不因宕机恢复后而抢占VIP（非抢占模式）；
